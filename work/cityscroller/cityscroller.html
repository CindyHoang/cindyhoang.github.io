<html>
	<head>
		<title>City Scroller</title>
		<script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
		<script type="text/processing" data-processing-target="mycanvas">
		
		var buildingline;
		var buildingline2;
		var buildingline3;
		PImage pic;
		
		void setup()
		{   //x distance, color, width range, height range, speed, number of buildings
			buildingline = new Motion(50, [40, 0, 75], [50, 100], [-600, -350], 2, 600);
			buildingline2 = new Motion(75, [0, 0, 50], [75, 150], [-425, -200], 4, 850);
			buildingline3 = new Motion(100, [0, 0, 0], [100, 200], [-225, -50], 6, 1000);
			size(1350,650);
			background(255,100,15);
			pic = loadImage("sunset.jpg");
		}

		void draw(){  
			background(255,100,15);
			image(pic, 0, 0);
			buildingline.multiply();
			buildingline2.multiply();
			buildingline3.multiply();
		}
		
		class Building {
			var x;
			var width;
			var height;
			var r;
			var g;
			var b;
			var speed;
			
			Building(xPosition, color, xSize, ySize, Xspeed){
				x = xPosition;
				r = color[0];
				g = color[1];
				b = color[2];
				width = xSize;
				height = ySize;
				speed = Xspeed;
			}
			
			void drawBuilding(){
				noStroke();
				fill(r,g,b);
				rect(x, 650, width, height);
			}
			void movebuilding(){
				x -= speed;
			}
		}
		
		class Motion {
			var building;
			var x;
			var buildingnumber;
			var widthlow;
			var widthhigh;
			var heightlow;
			var heighthigh;
			var r;
			var g;
			var b;
			var speed;
			var list = new Array();
			
			Motion(xpos, color, widthrange, heightrange, buildspeed, numBuild){
				x = xpos;
				r = color[0];
				g = color[1];
				b = color[2];
				widthlow = widthrange[0];
				widthhigh = widthrange[1];
				heightlow = heightrange[0];
				heighthigh = heightrange[1];
				speed = buildspeed;
				buildingnumber = numBuild;
				
				for (var i = 0; i<buildingnumber; i++;){
					building = new Building(x*i, [r, g, b], random(widthlow, widthhigh), random(heightlow, heighthigh), speed);
					list.push(building);
				}
			}
			
			void multiply(){
				
				for (var i=0; i<list.length; i++){
					list[i].drawBuilding();
					list[i].movebuilding();
					}
			}
			
		}
		
		</script>
	</head>
	<body>
		<canvas id="mycanvas"></canvas>
	</body>
</html>